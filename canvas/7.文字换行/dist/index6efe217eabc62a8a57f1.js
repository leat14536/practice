!function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=9)}([function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,i){"use strict";e.__esModule=!0;var n=i(11),r=function(t){return t&&t.__esModule?t:{default:t}}(n);e.default=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,r.default)(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}()},function(t,e,i){t.exports=!i(7)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,e){var i=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=i)},function(t,e,i){var n=i(18),r=i(19),o=i(21),s=Object.defineProperty;e.f=i(2)?Object.defineProperty:function(t,e,i){if(n(t),e=o(e,!0),n(i),r)try{return s(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,i){"use strict";var n=i(0),r=i.n(n),o=i(1),s=i.n(o),a=function(){function t(e,i){r()(this,t),this.text="",this.left=e,this.bottom=i,this.caret=0}return s()(t,[{key:"insert",value:function(t){this.text=this.text.substr(0,this.caret)+t+this.text.substr(this.caret),this.caret+=t.length}},{key:"removeCharacterBeforeCaret",value:function(){0!==this.caret&&(this.text=this.text.substring(0,this.caret-1)+this.text.substring(this.caret),this.caret--)}},{key:"getWidth",value:function(t){return t.measureText(this.text).width}},{key:"getHeight",value:function(t){var e=t.measureText("W").width;return e+e/6}},{key:"draw",value:function(t){t.save(),t.textAlign="start",t.textBaseline="bottom",t.strokeText(this.text,this.left,this.bottom),t.fillText(this.text,this.left,this.bottom),t.restore()}},{key:"erase",value:function(t,e){t.putImageData(e,0,0)}},{key:"removeLastCharacter",value:function(){this.text=this.text.slice(0,-1)}},{key:"getCaretX",value:function(t){var e=this.text.substring(0,this.caret),i=t.measureText(e).width;return this.left+i}}]),t}();e.a=a},function(t,e,i){"use strict";function n(){h.font=f.value+"px Arial"}function r(){h.fillStyle=v.value}Object.defineProperty(e,"__esModule",{value:!0});var o=i(10),s=i(23),a=i(8),c=i(24),u=new o.a({canvas:document.querySelector("#canvas")}),h=u.getContext(),l=new s.a,f=document.querySelector("#size"),v=document.querySelector("#color"),d=void 0,g=void 0,x=void 0;d=u.saveData(),u.drawGrid(),n(),r(),u.addEvent("mousedown",function(t){var e=u.windowToCanvas(t.clientX,t.clientY),i=void 0;l.erase(h,d),d=u.saveData(),x&&x.isPointInside(e)?x.moveCursorCloseTo(e.x,e.y):(i=h.measureText("W").width,i+=i/6,x=new c.a(h,e.x,e.y-i,d,l),g=new a.a(e.x,e.y),x.addLine(g))}),document.addEventListener("keydown",function(t){8!==t.keyCode&&13!==t.keyCode||t.preventDefault(),8===t.keyCode&&x.backspace(v.value),13===t.keyCode&&x.newLine()}),document.addEventListener("keypress",function(t){var e=String.fromCharCode(t.which);8===t.keyCode||t.ctrlKey||t.metaKey||(t.preventDefault(),h.save(),h.fillStyle=v.value,h.strokeStyle=v.value,x.insert(e))}),f.onchange=n,v.onchange=r},function(t,e,i){"use strict";var n=i(0),r=i.n(n),o=i(1),s=i.n(o),a=function(){function t(e){var i=e.canvas,n=e.grid,o=void 0===n?10:n,s=e.assistColor,a=void 0===s?"red":s;r()(this,t),i=i||document.createElement("canvas"),this.canvas=i,this.context=i.getContext("2d"),this.imgData=null,this.grid=o,this.assistColor=a}return s()(t,[{key:"getCanvas",value:function(){return this.canvas}},{key:"getContext",value:function(){return this.context}},{key:"saveData",value:function(){return this.imgData=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),this.imgData}},{key:"loadData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.imgData;arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];t&&this.context.putImageData(t,0,0)}},{key:"drawGrid",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.grid,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.grid,n=this.context,r=this.canvas.width,o=this.canvas.height;n.strokeStyle=t||"#aaa";for(var s=.5+e;s<r;s+=e)n.beginPath(),n.moveTo(s,0),n.lineTo(s,o),n.stroke(),n.closePath();for(var a=.5+i;a<o;a+=i)n.beginPath(),n.moveTo(0,a),n.lineTo(r,a),n.stroke(),n.closePath()}},{key:"addEvent",value:function(t,e){this.canvas.addEventListener(t,e)}},{key:"drawPattern",value:function(t){var e=this.context;t.stroke(e),t.fill(e)}},{key:"windowToCanvas",value:function(t,e){var i=this.canvas.getBoundingClientRect();return{x:t-i.left*(this.canvas.width/i.width),y:e-i.top*(this.canvas.height/i.height)}}},{key:"drawAssist",value:function(t,e,i){var n=this.context;n.save(),n.strokeStyle=i||this.assistColor,n.beginPath(),n.moveTo(t,0),n.lineTo(t,this.canvas.height),n.stroke(),n.beginPath(),n.moveTo(0,e),n.lineTo(this.canvas.width,e),n.stroke(),n.closePath(),n.stroke()}},{key:"clear",value:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}}]),t}();e.a=a},function(t,e,i){t.exports={default:i(12),__esModule:!0}},function(t,e,i){i(13);var n=i(5).Object;t.exports=function(t,e,i){return n.defineProperty(t,e,i)}},function(t,e,i){var n=i(14);n(n.S+n.F*!i(2),"Object",{defineProperty:i(6).f})},function(t,e,i){var n=i(4),r=i(5),o=i(15),s=i(17),a=function(t,e,i){var c,u,h,l=t&a.F,f=t&a.G,v=t&a.S,d=t&a.P,g=t&a.B,x=t&a.W,y=f?r:r[e]||(r[e]={}),p=y.prototype,m=f?n:v?n[e]:(n[e]||{}).prototype;f&&(i=e);for(c in i)(u=!l&&m&&void 0!==m[c])&&c in y||(h=u?m[c]:i[c],y[c]=f&&"function"!=typeof m[c]?i[c]:g&&u?o(h,n):x&&m[c]==h?function(t){var e=function(e,i,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,i)}return new t(e,i,n)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(h):d&&"function"==typeof h?o(Function.call,h):h,d&&((y.virtual||(y.virtual={}))[c]=h,t&a.R&&p&&!p[c]&&s(p,c,h)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a},function(t,e,i){var n=i(16);t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,i){var n=i(6),r=i(22);t.exports=i(2)?function(t,e,i){return n.f(t,e,r(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e,i){var n=i(3);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e,i){t.exports=!i(2)&&!i(7)(function(){return 7!=Object.defineProperty(i(20)("div"),"a",{get:function(){return 7}}).a})},function(t,e,i){var n=i(3),r=i(4).document,o=n(r)&&n(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},function(t,e,i){var n=i(3);t.exports=function(t,e){if(!n(t))return t;var i,r;if(e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;if("function"==typeof(i=t.valueOf)&&!n(r=i.call(t)))return r;if(!e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,i){"use strict";var n=i(0),r=i.n(n),o=i(1),s=i.n(o),a=function(){function t(e,i){r()(this,t),this.fillStyle=i||"rgba(0,0,0,0.5)",this.width=e||2,this.left=0,this.top=0}return s()(t,[{key:"getHeight",value:function(t){var e=t.measureText("W").width;return e+e/6}},{key:"createPath",value:function(t){t.beginPath(),t.rect(this.left,this.top,this.width,this.getHeight(t))}},{key:"draw",value:function(t,e,i){t.save(),this.left=e,this.top=i-this.getHeight(t),this.createPath(t),t.fillStyle=this.fillStyle,t.fill(),t.restore()}},{key:"erase",value:function(t,e){t.putImageData(e,0,0,this.left,this.top,this.width+1,this.getHeight(t)+1)}}]),t}();e.a=a},function(t,e,i){"use strict";var n=i(0),r=i.n(n),o=i(1),s=i.n(o),a=i(8),c=function(){function t(e,i,n,o,s){r()(this,t),this.context=e,this.drawingSurface=o,this.left=i,this.top=n,this.lines=[],this.activeLine=null,this.cursor=s,this.blinkingInterval=null,this.blinkingTimer=null}return s()(t,[{key:"isPointInside",value:function(t){var e=this.context;return e.beginPath(),e.rect(this.left,this.top,this.getWidth(),this.getHeight()),e.isPointInPath(t.x,t.y)}},{key:"getHeight",value:function(){var t=0,e=this.context;return this.lines.forEach(function(i){t+=i.getHeight(e)}),t}},{key:"getWidth",value:function(){var t=0,e=0,i=this.context;return this.lines.forEach(function(n){(t=n.getWidth(i))>e&&(e=t)}),e}},{key:"draw",value:function(){var t=this.context;this.lines.forEach(function(e){e.draw(t)})}},{key:"erase",value:function(t,e){t.putImageData(e,0,0)}},{key:"addLine",value:function(t){this.lines.push(t),this.activeLine=t,this.moveCursor(t.left,t.bottom)}},{key:"insert",value:function(t){this.erase(this.context,this.drawingSurface),this.activeLine.insert(t);var e=this.activeLine.text.substring(0,this.activeLine.caret),i=this.context.measureText(e).width;this.moveCursor(this.activeLine.left+i,this.activeLine.bottom),this.draw(this.context)}},{key:"blinkCursor",value:function(t,e){var i=this,n=this.cursor,r=this.context;clearInterval(this.blinkingInterval),clearTimeout(this.blinkingTimer),this.blinkingInterval=setInterval(function(){n.erase(r,i.drawingSurface),i.blinkingTimer=setTimeout(function(){n.draw(r,n.left,n.top+n.getHeight(r))},200)},900)}},{key:"moveCursorCloseTo",value:function(t,e){var i=this.getLine(e),n=this.context;i&&(i.caret=this.getColumn(i,t),this.activeLine=i,this.moveCursor(i.getCaretX(n),i.bottom))}},{key:"moveCursor",value:function(t,e){this.cursor.erase(this.context,this.drawingSurface),this.cursor.draw(this.context,t,e),this.blinkingInterval||this.blinkCursor(t,e)}},{key:"moveLinesDown",value:function(t){for(var e,i=t;i<this.lines.length;i++)e=this.line[i],e.bottom+=e.getHeight(this.context)}},{key:"newLine",value:function(){var t=this.activeLine.text.substring(0,this.activeLine.caret),e=this.activeLine.text.substring(this.activeLine.caret),i=this.context.measureText("W").width+this.context.measureText("W").width/6,n=this.activeLine.bottom+i,r=void 0,o=void 0;this.erase(this.context,this.drawingSurface),this.activeLine.text=t,o=new a.a(this.activeLine.left,n),o.insert(e),r=this.lines.indexOf(this.activeLine),this.lines.splice(r+1,0,o),this.activeLine=o,this.activeLine.caret=0,r=this.lines.indexOf(this.activeLine);for(var s=r+1;s<this.lines.length;++s)o=this.lines[s],o.bottom+=i;this.draw(),this.cursor.draw(this.context,this.activeLine.left,this.activeLine.bottom)}},{key:"getLine",value:function(t){for(var e,i=this.context,n=0;n<this.lines.length;++n)if(e=this.lines[n],t>e.bottom-e.getHeight(i)&&t<e.bottom)return e}},{key:"getColumn",value:function(t,e){var i=!1,n=void 0,r=void 0,o=void 0,s=void 0,c=void 0,u=this.context;for(s=new a.a(t.left,t.bottom),s.insert(t.text);!i&&s.text.length>0;)n=s.left+s.getWidth(u),s.removeLastCharacter(),(r=s.left+s.getWidth(u))<e&&(o=e-r<n-e?r:n,c=o===n?s.text.length+1:s.text.length,i=!0);return c}},{key:"activeLineIsOutOfText",value:function(){return 0===this.activeLine.text.length}},{key:"activeLineIsTopLine",value:function(){return this.lines[0]===this.activeLine}},{key:"moveUpOneLine",value:function(){var t=void 0,e=void 0,i=void 0,n=void 0;i=this.activeLine,t=""+i.text,n=this.lines.indexOf(this.activeLine),this.activeLine=this.lines[n-1],this.activeLine.caret=this.activeLine.text.length,this.lines.splice(n,1),this.moveCursor(this.activeLine.left+this.activeLine.getWidth(this.context),this.activeLine.bottom),this.activeLine.text+=t;for(var r=n;r<this.lines.length;++r)e=this.lines[r],e.bottom-=e.getHeight(this.context)}},{key:"backspace",value:function(t){var e,i,n=this.context;this.context.save(),0===this.activeLine.caret?this.activeLineIsTopLine()||(this.erase(this.context,this.drawingSurface),this.moveUpOneLine(),this.draw()):(this.context.fillStyle=t,this.context.strokeStyle=t,this.erase(this.context,this.drawingSurface),this.activeLine.removeCharacterBeforeCaret(),e=this.activeLine.text.slice(0,this.activeLine.caret),i=this.context.measureText(e).width,this.moveCursor(this.activeLine.left+i,this.activeLine.bottom),this.draw(this.context),n.restore())}}]),t}();e.a=c}]);