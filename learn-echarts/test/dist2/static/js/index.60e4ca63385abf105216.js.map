{"version":3,"sources":["webpack:///static/js/index.60e4ca63385abf105216.js","webpack:///./src/index.js","webpack:///./src/api/getData.js","webpack:///./src/fetch/get.js","webpack:///./src/echartsOptions/index.js"],"names":["webpackJsonp","157","module","__webpack_exports__","__webpack_require__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0__api_getData__","__WEBPACK_IMPORTED_MODULE_1__echartsOptions__","chart","then","data","id","158","getData","__WEBPACK_IMPORTED_MODULE_0__fetch_get__","res","json","code","159","get","url","fetch","credentials","headers","Accept","160","ecInit","el","__WEBPACK_IMPORTED_MODULE_0_echarts___default","a","init","document","querySelector","showLoading","setCandlestickBaseOption","initialNum","calculateMA","dayCount","result","i","len","DATA0","values","length","push","sum","j","baseOption","title","text","left","tooltip","trigger","axisPointer","type","legend","grid","right","bottom","xAxis","categoryData","scale","boundaryGap","axisLine","onZero","splitLine","show","splitNumber","min","max","yAxis","splitArea","series","name","itemStyle","normal","color","upColor","color0","downColor","borderColor","upBorderColor","borderColor0","downBorderColor","markPoint","label","formatter","param","Math","round","coord","valueDim","markLine","symbol","symbolSize","emphasis","smooth","lineStyle","opacity","setOption","items","slice","forEach","item","DATA0AddFormat","addData","hideLoading","addSyncData","initialData","delay","num","initialIndex","currentIndex","timer","setInterval","clearInterval","replace","option","__WEBPACK_IMPORTED_MODULE_0_echarts__","n"],"mappings":"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","file":"static/js/index.60e4ca63385abf105216.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ 157:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__api_getData__ = __webpack_require__(158);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__echartsOptions__ = __webpack_require__(160);\n\n\n\n\nvar chart = Object(__WEBPACK_IMPORTED_MODULE_1__echartsOptions__[\"b\" /* ecInit */])('#main');\nvar id = 'A';\n\nObject(__WEBPACK_IMPORTED_MODULE_0__api_getData__[\"a\" /* getData */])(id).then(function (data) {\n  Object(__WEBPACK_IMPORTED_MODULE_1__echartsOptions__[\"c\" /* setCandlestickBaseOption */])(chart, data, id + '公司', 30);\n  return data;\n}).then(function (data) {\n  Object(__WEBPACK_IMPORTED_MODULE_1__echartsOptions__[\"a\" /* addSyncData */])(chart, data, 200, 1, 30);\n});\n\n/***/ }),\n\n/***/ 158:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = getData;\n/* unused harmony export getNames */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__fetch_get__ = __webpack_require__(159);\n\n\nfunction getData(id) {\n  return Object(__WEBPACK_IMPORTED_MODULE_0__fetch_get__[\"a\" /* get */])('/api/sp500hst/item/' + id).then(function (res) {\n    return res.json();\n  }).then(function (json) {\n    if (json.code === 0) {\n      return json.data;\n    }\n  });\n}\n\nfunction getNames() {\n  return Object(__WEBPACK_IMPORTED_MODULE_0__fetch_get__[\"a\" /* get */])('/api/sp500hst/names').then(function (res) {\n    return res.json();\n  }).then(function (json) {\n    if (json.code === 0) {\n      return json.data;\n    }\n  });\n}\n\n/***/ }),\n\n/***/ 159:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = get;\n\nfunction get(url) {\n  return fetch(url, {\n    credentials: 'include',\n    headers: {\n      'Accept': 'application/json, text/plain, */*'\n    }\n  });\n}\n\n/***/ }),\n\n/***/ 160:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = ecInit;\n/* unused harmony export setCandlestickOption */\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = setCandlestickBaseOption;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = addSyncData;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_echarts__ = __webpack_require__(161);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_echarts___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_echarts__);\n\n\n\nfunction ecInit(el) {\n  if (!el) return null;\n  var chart = __WEBPACK_IMPORTED_MODULE_0_echarts___default.a.init(document.querySelector(el));\n  chart.showLoading();\n  return chart;\n}\n\nvar upColor = '#ec0000';\nvar upBorderColor = '#8A0000';\nvar downColor = '#00da3c';\nvar downBorderColor = '#008F28';\n\nfunction setCandlestickOption(chart, initialData, id) {\n\n  var data0 = splitData(initialData);\n  var option = {\n    title: {\n      text: id + '指数',\n      left: 0\n    },\n    tooltip: {\n      trigger: 'axis',\n      axisPointer: {\n        type: 'cross'\n      }\n    },\n    legend: {\n      data: ['日K', 'MA5', 'MA10', 'MA20', 'MA30']\n    },\n    grid: {\n      left: '10%',\n      right: '10%',\n      bottom: '15%'\n    },\n    xAxis: {\n      type: 'category',\n      data: data0.categoryData,\n      scale: true,\n      boundaryGap: false,\n      axisLine: { onZero: false },\n      splitLine: { show: false },\n      splitNumber: 20,\n      min: 'dataMin',\n      max: 'dataMax'\n    },\n    yAxis: {\n      scale: true,\n      splitArea: {\n        show: true\n      }\n    },\n\n    series: [{\n      name: '日K',\n      type: 'candlestick',\n      data: data0.values,\n      itemStyle: {\n        normal: {\n          color: upColor,\n          color0: downColor,\n          borderColor: upBorderColor,\n          borderColor0: downBorderColor\n        }\n      },\n      markPoint: {\n        label: {\n          normal: {\n            formatter: function formatter(param) {\n              return param != null ? Math.round(param.value) : '';\n            }\n          }\n        },\n        data: [{\n          name: 'XX标点',\n          coord: ['2013/5/31', 2300],\n          value: 2300,\n          itemStyle: {\n            normal: { color: 'rgb(41,60,85)' }\n          }\n        }, {\n          name: 'highest value',\n          type: 'max',\n          valueDim: 'highest'\n        }, {\n          name: 'lowest value',\n          type: 'min',\n          valueDim: 'lowest'\n        }, {\n          name: 'average value on close',\n          type: 'average',\n          valueDim: 'close'\n        }],\n        tooltip: {\n          formatter: function formatter(param) {\n            return param.name + '<br>' + (param.data.coord || '');\n          }\n        }\n      },\n      markLine: {\n        symbol: ['none', 'none'],\n        data: [[{\n          name: 'from lowest to highest',\n          type: 'min',\n          valueDim: 'lowest',\n          symbol: 'circle',\n          symbolSize: 10,\n          label: {\n            normal: { show: false },\n            emphasis: { show: false }\n          }\n        }, {\n          type: 'max',\n          valueDim: 'highest',\n          symbol: 'circle',\n          symbolSize: 10,\n          label: {\n            normal: { show: false },\n            emphasis: { show: false }\n          }\n        }], {\n          name: 'min line on close',\n          type: 'min',\n          valueDim: 'close'\n        }, {\n          name: 'max line on close',\n          type: 'max',\n          valueDim: 'close'\n        }]\n      }\n    }, {\n      name: 'MA5',\n      type: 'line',\n      data: calculateMA(5),\n      smooth: true,\n      lineStyle: {\n        normal: { opacity: 0.5 }\n      }\n    }, {\n      name: 'MA10',\n      type: 'line',\n      data: calculateMA(10),\n      smooth: true,\n      lineStyle: {\n        normal: { opacity: 0.5 }\n      }\n    }, {\n      name: 'MA20',\n      type: 'line',\n      data: calculateMA(20),\n      smooth: true,\n      lineStyle: {\n        normal: { opacity: 0.5 }\n      }\n    }, {\n      name: 'MA30',\n      type: 'line',\n      data: calculateMA(30),\n      smooth: true,\n      lineStyle: {\n        normal: { opacity: 0.5 }\n      }\n    }]\n  };\n\n  chart.setOption(option);\n  chart.hideLoading();\n\n  function splitData(rawData) {\n    var categoryData = [];\n    var values = [];\n\n    for (var i = 0; i < rawData.length; i++) {\n      categoryData.push(rawData[i][0].replace(/(\\d{4})(\\d{2})(\\d{2})/, '$1/$2/$3'));\n      values.push([+rawData[i][1], +rawData[i][4], +rawData[i][3], +rawData[i][2]]);\n    }\n\n    return {\n      categoryData: categoryData,\n      values: values\n    };\n  }\n\n  function calculateMA(dayCount) {\n    var result = [];\n    for (var i = 0, len = data0.values.length; i < len; i++) {\n      if (i < dayCount) {\n        result.push('-');\n        continue;\n      }\n      var sum = 0;\n      for (var j = 0; j < dayCount; j++) {\n        sum += data0.values[i - j][1];\n      }\n      result.push(sum / dayCount);\n    }\n    return result;\n  }\n}\n\nvar DATA0 = {\n  categoryData: [],\n  values: []\n};\nfunction setCandlestickBaseOption(chart, data, id, initialNum) {\n  initialNum = initialNum || 30;\n  var baseOption = {\n    title: {\n      text: id + '指数',\n      left: 0\n    },\n    tooltip: {\n      trigger: 'axis',\n      axisPointer: {\n        type: 'cross'\n      }\n    },\n    legend: {\n      data: ['日K', 'MA5', 'MA10', 'MA20', 'MA30']\n    },\n    grid: {\n      left: '10%',\n      right: '10%',\n      bottom: '15%'\n    },\n    xAxis: {\n      type: 'category',\n      data: DATA0.categoryData,\n      scale: true,\n      boundaryGap: false,\n      axisLine: { onZero: false },\n      splitLine: { show: false },\n      splitNumber: 20,\n      min: 'dataMin',\n      max: 'dataMax'\n    },\n    yAxis: {\n      scale: true,\n      splitArea: {\n        show: true\n      }\n    },\n\n    series: [{\n      name: '日K',\n      type: 'candlestick',\n      data: DATA0.values,\n      itemStyle: {\n        normal: {\n          color: upColor,\n          color0: downColor,\n          borderColor: upBorderColor,\n          borderColor0: downBorderColor\n        }\n      },\n      markPoint: {\n        label: {\n          normal: {\n            formatter: function formatter(param) {\n              return param != null ? Math.round(param.value) : '';\n            }\n          }\n        },\n        data: [{\n          name: 'XX标点',\n          coord: ['2013/5/31', 2300],\n          value: 2300,\n          itemStyle: {\n            normal: { color: 'rgb(41,60,85)' }\n          }\n        }, {\n          name: 'highest value',\n          type: 'max',\n          valueDim: 'highest'\n        }, {\n          name: 'lowest value',\n          type: 'min',\n          valueDim: 'lowest'\n        }, {\n          name: 'average value on close',\n          type: 'average',\n          valueDim: 'close'\n        }],\n        tooltip: {\n          formatter: function formatter(param) {\n            return param.name + '<br>' + (param.data.coord || '');\n          }\n        }\n      },\n      markLine: {\n        symbol: ['none', 'none'],\n        data: [[{\n          name: 'from lowest to highest',\n          type: 'min',\n          valueDim: 'lowest',\n          symbol: 'circle',\n          symbolSize: 10,\n          label: {\n            normal: { show: false },\n            emphasis: { show: false }\n          }\n        }, {\n          type: 'max',\n          valueDim: 'highest',\n          symbol: 'circle',\n          symbolSize: 10,\n          label: {\n            normal: { show: false },\n            emphasis: { show: false }\n          }\n        }], {\n          name: 'min line on close',\n          type: 'min',\n          valueDim: 'close'\n        }, {\n          name: 'max line on close',\n          type: 'max',\n          valueDim: 'close'\n        }]\n      }\n    }, {\n      name: 'MA5',\n      type: 'line',\n      data: calculateMA(5),\n      smooth: true,\n      lineStyle: {\n        normal: { opacity: 0.5 }\n      }\n    }, {\n      name: 'MA10',\n      type: 'line',\n      data: calculateMA(10),\n      smooth: true,\n      lineStyle: {\n        normal: { opacity: 0.5 }\n      }\n    }, {\n      name: 'MA20',\n      type: 'line',\n      data: calculateMA(20),\n      smooth: true,\n      lineStyle: {\n        normal: { opacity: 0.5 }\n      }\n    }, {\n      name: 'MA30',\n      type: 'line',\n      data: calculateMA(30),\n      smooth: true,\n      lineStyle: {\n        normal: { opacity: 0.5 }\n      }\n    }]\n  };\n\n  chart.setOption(baseOption);\n\n  var items = data.slice(0, initialNum);\n  if (items.length) {\n    items.forEach(function (item) {\n      return DATA0AddFormat(item);\n    });\n    addData(chart);\n  }\n  chart.hideLoading();\n\n  function calculateMA(dayCount) {\n    var result = [];\n    for (var i = 0, len = DATA0.values.length; i < len; i++) {\n      if (i < dayCount) {\n        result.push('-');\n        continue;\n      }\n      var sum = 0;\n      for (var j = 0; j < dayCount; j++) {\n        sum += DATA0.values[i - j][1];\n      }\n      result.push(sum / dayCount);\n    }\n    return result;\n  }\n}\n\nfunction addSyncData(chart, initialData, delay, num, initialIndex) {\n  var data = initialData.slice();\n  var currentIndex = initialIndex || 0;\n  var timer = setInterval(function () {\n    var items = data.slice(currentIndex, currentIndex + num);\n\n    if (items.length) {\n      items.forEach(function (item) {\n        DATA0.categoryData = DATA0.categoryData.slice(num);\n        DATA0.values = DATA0.values.slice(num);\n        DATA0AddFormat(item);\n      });\n      addData(chart);\n\n      currentIndex += num;\n    } else {\n      clearInterval(timer);\n    }\n  }, delay);\n}\n\nfunction DATA0AddFormat(item) {\n  DATA0.categoryData.push(item[0].replace(/(\\d{4})(\\d{2})(\\d{2})/, '$1/$2/$3'));\n  DATA0.values.push([+item[1], +item[4], +item[3], +item[2]]);\n}\n\nfunction addData(chart) {\n  var option = {\n    xAxis: {\n      type: 'category',\n      data: DATA0.categoryData,\n      scale: true,\n      boundaryGap: false,\n      axisLine: { onZero: false },\n      splitLine: { show: false },\n      splitNumber: 20,\n      min: 'dataMin',\n      max: 'dataMax'\n    },\n    series: [{\n      name: '日K',\n      type: 'candlestick',\n      data: DATA0.values,\n      itemStyle: {\n        normal: {\n          color: upColor,\n          color0: downColor,\n          borderColor: upBorderColor,\n          borderColor0: downBorderColor\n        }\n      },\n      markPoint: {\n        label: {\n          normal: {\n            formatter: function formatter(param) {\n              return param != null ? Math.round(param.value) : '';\n            }\n          }\n        },\n        data: [{\n          name: 'XX标点',\n          coord: ['2013/5/31', 2300],\n          value: 2300,\n          itemStyle: {\n            normal: { color: 'rgb(41,60,85)' }\n          }\n        }, {\n          name: 'highest value',\n          type: 'max',\n          valueDim: 'highest'\n        }, {\n          name: 'lowest value',\n          type: 'min',\n          valueDim: 'lowest'\n        }, {\n          name: 'average value on close',\n          type: 'average',\n          valueDim: 'close'\n        }],\n        tooltip: {\n          formatter: function formatter(param) {\n            return param.name + '<br>' + (param.data.coord || '');\n          }\n        }\n      },\n      markLine: {\n        symbol: ['none', 'none'],\n        data: [[{\n          name: 'from lowest to highest',\n          type: 'min',\n          valueDim: 'lowest',\n          symbol: 'circle',\n          symbolSize: 10,\n          label: {\n            normal: { show: false },\n            emphasis: { show: false }\n          }\n        }, {\n          type: 'max',\n          valueDim: 'highest',\n          symbol: 'circle',\n          symbolSize: 10,\n          label: {\n            normal: { show: false },\n            emphasis: { show: false }\n          }\n        }], {\n          name: 'min line on close',\n          type: 'min',\n          valueDim: 'close'\n        }, {\n          name: 'max line on close',\n          type: 'max',\n          valueDim: 'close'\n        }]\n      }\n    }, {\n      name: 'MA5',\n      type: 'line',\n      data: calculateMA(5),\n      smooth: true,\n      lineStyle: {\n        normal: { opacity: 0.5 }\n      }\n    }, {\n      name: 'MA10',\n      type: 'line',\n      data: calculateMA(10),\n      smooth: true,\n      lineStyle: {\n        normal: { opacity: 0.5 }\n      }\n    }, {\n      name: 'MA20',\n      type: 'line',\n      data: calculateMA(20),\n      smooth: true,\n      lineStyle: {\n        normal: { opacity: 0.5 }\n      }\n    }, {\n      name: 'MA30',\n      type: 'line',\n      data: calculateMA(30),\n      smooth: true,\n      lineStyle: {\n        normal: { opacity: 0.5 }\n      }\n    }]\n  };\n  chart.setOption(option);\n  function calculateMA(dayCount) {\n    var result = [];\n    for (var i = 0, len = DATA0.values.length; i < len; i++) {\n      if (i < dayCount) {\n        result.push('-');\n        continue;\n      }\n      var sum = 0;\n      for (var j = 0; j < dayCount; j++) {\n        sum += DATA0.values[i - j][1];\n      }\n      result.push(sum / dayCount);\n    }\n    return result;\n  }\n}\n\n/***/ })\n\n},[157]);\n\n\n// WEBPACK FOOTER //\n// static/js/index.60e4ca63385abf105216.js","/**\n * Created by Administrator on 2017/9/30 0030.\n */\nimport {getData} from './api/getData'\nimport {ecInit, setCandlestickBaseOption, addSyncData} from './echartsOptions'\n\nconst chart = ecInit('#main')\nconst id = 'A'\n\ngetData(id).then(data => {\n  setCandlestickBaseOption(chart, data, id + '公司', 30)\n  return data\n}).then(data => {\n  addSyncData(chart, data, 200, 1, 30)\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","/**\n * Created by Administrator on 2017/9/30 0030.\n */\nimport {get} from '../fetch/get'\nexport function getData(id) {\n  return get('/api/sp500hst/item/' + id)\n    .then(res => res.json())\n    .then(json => {\n      if (json.code === 0) {\n        return json.data\n      }\n    })\n}\n\nexport function getNames(){\n  return get('/api/sp500hst/names')\n    .then(res => res.json())\n    .then(json => {\n      if (json.code === 0) {\n        return json.data\n      }\n    })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/getData.js","/**\n * Created by Administrator on 2017/9/30 0030.\n */\nexport function get(url) {\n  return fetch(url, {\n    credentials: 'include',\n    headers: {\n      'Accept': 'application/json, text/plain, */*'\n    }\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/fetch/get.js","/**\n * Created by Administrator on 2017/9/30 0030.\n */\nimport echarts from 'echarts'\n\nexport function ecInit(el) {\n  if (!el) return null\n  const chart = echarts.init(document.querySelector(el))\n  chart.showLoading()\n  return chart\n}\n\nconst upColor = '#ec0000'\nconst upBorderColor = '#8A0000'\nconst downColor = '#00da3c'\nconst downBorderColor = '#008F28'\n\nexport function setCandlestickOption(chart, initialData, id) {\n\n  const data0 = splitData(initialData)\n  const option = {\n    title: {\n      text: id + '指数',\n      left: 0\n    },\n    tooltip: {\n      trigger: 'axis',\n      axisPointer: {\n        type: 'cross'\n      }\n    },\n    legend: {\n      data: ['日K', 'MA5', 'MA10', 'MA20', 'MA30']\n    },\n    grid: {\n      left: '10%',\n      right: '10%',\n      bottom: '15%'\n    },\n    xAxis: {\n      type: 'category',\n      data: data0.categoryData,\n      scale: true,\n      boundaryGap: false,\n      axisLine: {onZero: false},\n      splitLine: {show: false},\n      splitNumber: 20,\n      min: 'dataMin',\n      max: 'dataMax'\n    },\n    yAxis: {\n      scale: true,\n      splitArea: {\n        show: true\n      }\n    },\n    /*dataZoom: [\n     {\n     type: 'inside',\n     start: 50,\n     end: 100\n     },\n     {\n     show: true,\n     type: 'slider',\n     y: '90%',\n     start: 50,\n     end: 100\n     }\n     ],*/\n    series: [\n      {\n        name: '日K',\n        type: 'candlestick',\n        data: data0.values,\n        itemStyle: {\n          normal: {\n            color: upColor,\n            color0: downColor,\n            borderColor: upBorderColor,\n            borderColor0: downBorderColor\n          }\n        },\n        markPoint: {\n          label: {\n            normal: {\n              formatter: function (param) {\n                return param != null ? Math.round(param.value) : '';\n              }\n            }\n          },\n          data: [\n            {\n              name: 'XX标点',\n              coord: ['2013/5/31', 2300],\n              value: 2300,\n              itemStyle: {\n                normal: {color: 'rgb(41,60,85)'}\n              }\n            },\n            {\n              name: 'highest value',\n              type: 'max',\n              valueDim: 'highest'\n            },\n            {\n              name: 'lowest value',\n              type: 'min',\n              valueDim: 'lowest'\n            },\n            {\n              name: 'average value on close',\n              type: 'average',\n              valueDim: 'close'\n            }\n          ],\n          tooltip: {\n            formatter: function (param) {\n              return param.name + '<br>' + (param.data.coord || '');\n            }\n          }\n        },\n        markLine: {\n          symbol: ['none', 'none'],\n          data: [\n            [\n              {\n                name: 'from lowest to highest',\n                type: 'min',\n                valueDim: 'lowest',\n                symbol: 'circle',\n                symbolSize: 10,\n                label: {\n                  normal: {show: false},\n                  emphasis: {show: false}\n                }\n              },\n              {\n                type: 'max',\n                valueDim: 'highest',\n                symbol: 'circle',\n                symbolSize: 10,\n                label: {\n                  normal: {show: false},\n                  emphasis: {show: false}\n                }\n              }\n            ],\n            {\n              name: 'min line on close',\n              type: 'min',\n              valueDim: 'close'\n            },\n            {\n              name: 'max line on close',\n              type: 'max',\n              valueDim: 'close'\n            }\n          ]\n        }\n      },\n      {\n        name: 'MA5',\n        type: 'line',\n        data: calculateMA(5),\n        smooth: true,\n        lineStyle: {\n          normal: {opacity: 0.5}\n        }\n      },\n      {\n        name: 'MA10',\n        type: 'line',\n        data: calculateMA(10),\n        smooth: true,\n        lineStyle: {\n          normal: {opacity: 0.5}\n        }\n      },\n      {\n        name: 'MA20',\n        type: 'line',\n        data: calculateMA(20),\n        smooth: true,\n        lineStyle: {\n          normal: {opacity: 0.5}\n        }\n      },\n      {\n        name: 'MA30',\n        type: 'line',\n        data: calculateMA(30),\n        smooth: true,\n        lineStyle: {\n          normal: {opacity: 0.5}\n        }\n      },\n\n    ]\n  }\n\n  chart.setOption(option)\n  chart.hideLoading()\n\n  function splitData(rawData) {\n    const categoryData = []\n    const values = []\n\n    for (let i = 0; i < rawData.length; i++) {\n      categoryData.push(rawData[i][0].replace(/(\\d{4})(\\d{2})(\\d{2})/, '$1/$2/$3'))\n      values.push([\n        +rawData[i][1],\n        +rawData[i][4],\n        +rawData[i][3],\n        +rawData[i][2]\n      ])\n    }\n\n    return {\n      categoryData,\n      values\n    }\n  }\n\n  function calculateMA(dayCount) {\n    const result = []\n    for (let i = 0, len = data0.values.length; i < len; i++) {\n      if (i < dayCount) {\n        result.push('-')\n        continue\n      }\n      let sum = 0\n      for (let j = 0; j < dayCount; j++) {\n        sum += data0.values[i - j][1]\n      }\n      result.push(sum / dayCount)\n    }\n    return result\n  }\n}\n\nconst DATA0 = {\n  categoryData: [],\n  values: []\n}\nexport function setCandlestickBaseOption(chart, data, id, initialNum) {\n  initialNum = initialNum || 30\n  const baseOption = {\n    title: {\n      text: id + '指数',\n      left: 0\n    },\n    tooltip: {\n      trigger: 'axis',\n      axisPointer: {\n        type: 'cross'\n      }\n    },\n    legend: {\n      data: ['日K', 'MA5', 'MA10', 'MA20', 'MA30']\n    },\n    grid: {\n      left: '10%',\n      right: '10%',\n      bottom: '15%'\n    },\n    xAxis: {\n      type: 'category',\n      data: DATA0.categoryData,\n      scale: true,\n      boundaryGap: false,\n      axisLine: {onZero: false},\n      splitLine: {show: false},\n      splitNumber: 20,\n      min: 'dataMin',\n      max: 'dataMax'\n    },\n    yAxis: {\n      scale: true,\n      splitArea: {\n        show: true\n      }\n    },\n    /*dataZoom: [\n     {\n     type: 'inside',\n     start: 50,\n     end: 100\n     },\n     {\n     show: true,\n     type: 'slider',\n     y: '90%',\n     start: 50,\n     end: 100\n     }\n     ],*/\n    series: [\n      {\n        name: '日K',\n        type: 'candlestick',\n        data: DATA0.values,\n        itemStyle: {\n          normal: {\n            color: upColor,\n            color0: downColor,\n            borderColor: upBorderColor,\n            borderColor0: downBorderColor\n          }\n        },\n        markPoint: {\n          label: {\n            normal: {\n              formatter: function (param) {\n                return param != null ? Math.round(param.value) : '';\n              }\n            }\n          },\n          data: [\n            {\n              name: 'XX标点',\n              coord: ['2013/5/31', 2300],\n              value: 2300,\n              itemStyle: {\n                normal: {color: 'rgb(41,60,85)'}\n              }\n            },\n            {\n              name: 'highest value',\n              type: 'max',\n              valueDim: 'highest'\n            },\n            {\n              name: 'lowest value',\n              type: 'min',\n              valueDim: 'lowest'\n            },\n            {\n              name: 'average value on close',\n              type: 'average',\n              valueDim: 'close'\n            }\n          ],\n          tooltip: {\n            formatter: function (param) {\n              return param.name + '<br>' + (param.data.coord || '');\n            }\n          }\n        },\n        markLine: {\n          symbol: ['none', 'none'],\n          data: [\n            [\n              {\n                name: 'from lowest to highest',\n                type: 'min',\n                valueDim: 'lowest',\n                symbol: 'circle',\n                symbolSize: 10,\n                label: {\n                  normal: {show: false},\n                  emphasis: {show: false}\n                }\n              },\n              {\n                type: 'max',\n                valueDim: 'highest',\n                symbol: 'circle',\n                symbolSize: 10,\n                label: {\n                  normal: {show: false},\n                  emphasis: {show: false}\n                }\n              }\n            ],\n            {\n              name: 'min line on close',\n              type: 'min',\n              valueDim: 'close'\n            },\n            {\n              name: 'max line on close',\n              type: 'max',\n              valueDim: 'close'\n            }\n          ]\n        }\n      },\n      {\n        name: 'MA5',\n        type: 'line',\n        data: calculateMA(5),\n        smooth: true,\n        lineStyle: {\n          normal: {opacity: 0.5}\n        }\n      },\n      {\n        name: 'MA10',\n        type: 'line',\n        data: calculateMA(10),\n        smooth: true,\n        lineStyle: {\n          normal: {opacity: 0.5}\n        }\n      },\n      {\n        name: 'MA20',\n        type: 'line',\n        data: calculateMA(20),\n        smooth: true,\n        lineStyle: {\n          normal: {opacity: 0.5}\n        }\n      },\n      {\n        name: 'MA30',\n        type: 'line',\n        data: calculateMA(30),\n        smooth: true,\n        lineStyle: {\n          normal: {opacity: 0.5}\n        }\n      },\n\n    ]\n  }\n\n  chart.setOption(baseOption)\n\n  const items = data.slice(0, initialNum)\n  if (items.length) {\n    items.forEach(item => DATA0AddFormat(item))\n    addData(chart)\n  }\n  chart.hideLoading()\n\n  function calculateMA(dayCount) {\n    const result = []\n    for (let i = 0, len = DATA0.values.length; i < len; i++) {\n      if (i < dayCount) {\n        result.push('-')\n        continue\n      }\n      let sum = 0\n      for (let j = 0; j < dayCount; j++) {\n        sum += DATA0.values[i - j][1]\n      }\n      result.push(sum / dayCount)\n    }\n    return result\n  }\n}\n\nexport function addSyncData(chart, initialData, delay, num, initialIndex) {\n  const data = initialData.slice()\n  let currentIndex = initialIndex || 0\n  const timer = setInterval(() => {\n    const items = data.slice(currentIndex, currentIndex + num)\n\n    if (items.length) {\n      items.forEach(item => {\n        DATA0.categoryData = DATA0.categoryData.slice(num)\n        DATA0.values = DATA0.values.slice(num)\n        DATA0AddFormat(item)\n      })\n      addData(chart)\n\n      currentIndex += num\n    } else {\n      clearInterval(timer)\n    }\n  }, delay)\n}\n\nfunction DATA0AddFormat(item) {\n  DATA0.categoryData.push(item[0].replace(/(\\d{4})(\\d{2})(\\d{2})/, '$1/$2/$3'))\n  DATA0.values.push([\n    +item[1],\n    +item[4],\n    +item[3],\n    +item[2]\n  ])\n}\n\nfunction addData(chart) {\n  const option = {\n    xAxis: {\n      type: 'category',\n      data: DATA0.categoryData,\n      scale: true,\n      boundaryGap: false,\n      axisLine: {onZero: false},\n      splitLine: {show: false},\n      splitNumber: 20,\n      min: 'dataMin',\n      max: 'dataMax'\n    },\n    series: [\n      {\n        name: '日K',\n        type: 'candlestick',\n        data: DATA0.values,\n        itemStyle: {\n          normal: {\n            color: upColor,\n            color0: downColor,\n            borderColor: upBorderColor,\n            borderColor0: downBorderColor\n          }\n        },\n        markPoint: {\n          label: {\n            normal: {\n              formatter: function (param) {\n                return param != null ? Math.round(param.value) : '';\n              }\n            }\n          },\n          data: [\n            {\n              name: 'XX标点',\n              coord: ['2013/5/31', 2300],\n              value: 2300,\n              itemStyle: {\n                normal: {color: 'rgb(41,60,85)'}\n              }\n            },\n            {\n              name: 'highest value',\n              type: 'max',\n              valueDim: 'highest'\n            },\n            {\n              name: 'lowest value',\n              type: 'min',\n              valueDim: 'lowest'\n            },\n            {\n              name: 'average value on close',\n              type: 'average',\n              valueDim: 'close'\n            }\n          ],\n          tooltip: {\n            formatter: function (param) {\n              return param.name + '<br>' + (param.data.coord || '');\n            }\n          }\n        },\n        markLine: {\n          symbol: ['none', 'none'],\n          data: [\n            [\n              {\n                name: 'from lowest to highest',\n                type: 'min',\n                valueDim: 'lowest',\n                symbol: 'circle',\n                symbolSize: 10,\n                label: {\n                  normal: {show: false},\n                  emphasis: {show: false}\n                }\n              },\n              {\n                type: 'max',\n                valueDim: 'highest',\n                symbol: 'circle',\n                symbolSize: 10,\n                label: {\n                  normal: {show: false},\n                  emphasis: {show: false}\n                }\n              }\n            ],\n            {\n              name: 'min line on close',\n              type: 'min',\n              valueDim: 'close'\n            },\n            {\n              name: 'max line on close',\n              type: 'max',\n              valueDim: 'close'\n            }\n          ]\n        }\n      },\n      {\n        name: 'MA5',\n        type: 'line',\n        data: calculateMA(5),\n        smooth: true,\n        lineStyle: {\n          normal: {opacity: 0.5}\n        }\n      },\n      {\n        name: 'MA10',\n        type: 'line',\n        data: calculateMA(10),\n        smooth: true,\n        lineStyle: {\n          normal: {opacity: 0.5}\n        }\n      },\n      {\n        name: 'MA20',\n        type: 'line',\n        data: calculateMA(20),\n        smooth: true,\n        lineStyle: {\n          normal: {opacity: 0.5}\n        }\n      },\n      {\n        name: 'MA30',\n        type: 'line',\n        data: calculateMA(30),\n        smooth: true,\n        lineStyle: {\n          normal: {opacity: 0.5}\n        }\n      }\n    ]\n  }\n  chart.setOption(option)\n  function calculateMA(dayCount) {\n    const result = []\n    for (let i = 0, len = DATA0.values.length; i < len; i++) {\n      if (i < dayCount) {\n        result.push('-')\n        continue\n      }\n      let sum = 0\n      for (let j = 0; j < dayCount; j++) {\n        sum += DATA0.values[i - j][1]\n      }\n      result.push(sum / dayCount)\n    }\n    return result\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/echartsOptions/index.js"],"sourceRoot":""}