{"version":3,"sources":["webpack:///static/js/index.67e2e4a4342c89316f8e.js","webpack:///./src/index.js","webpack:///./src/api/getData.js","webpack:///./src/fetch/get.js","webpack:///./src/echartsOptions/index.js"],"names":["webpackJsonp","157","module","__webpack_exports__","__webpack_require__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0__api_getData__","__WEBPACK_IMPORTED_MODULE_1__echartsOptions__","chart","then","data","id","158","getData","__WEBPACK_IMPORTED_MODULE_0__fetch_get__","res","json","code","159","get","url","fetch","credentials","headers","Accept","160","ecInit","el","__WEBPACK_IMPORTED_MODULE_0_echarts___default","a","init","document","querySelector","showLoading","setCandlestickOption","initialData","calculateMA","dayCount","result","i","len","data0","values","length","push","sum","j","rawData","categoryData","replace","option","title","text","left","tooltip","trigger","axisPointer","type","legend","grid","right","bottom","xAxis","scale","boundaryGap","axisLine","onZero","splitLine","show","splitNumber","min","max","yAxis","splitArea","dataZoom","start","end","y","series","name","itemStyle","normal","color","upColor","color0","downColor","borderColor","upBorderColor","borderColor0","downBorderColor","markPoint","label","formatter","param","Math","round","coord","valueDim","markLine","symbol","symbolSize","emphasis","smooth","lineStyle","opacity","setOption","hideLoading","__WEBPACK_IMPORTED_MODULE_0_echarts__","n"],"mappings":"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","file":"static/js/index.67e2e4a4342c89316f8e.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ 157:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__api_getData__ = __webpack_require__(158);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__echartsOptions__ = __webpack_require__(160);\n\n\n\n\nvar chart = Object(__WEBPACK_IMPORTED_MODULE_1__echartsOptions__[\"a\" /* ecInit */])('#main');\nvar id = 'A';\n\nObject(__WEBPACK_IMPORTED_MODULE_0__api_getData__[\"a\" /* getData */])(id).then(function (data) {\n  return Object(__WEBPACK_IMPORTED_MODULE_1__echartsOptions__[\"b\" /* setCandlestickOption */])(chart, data, id + '公司');\n});\n\n/***/ }),\n\n/***/ 158:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = getData;\n/* unused harmony export getNames */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__fetch_get__ = __webpack_require__(159);\n\n\nfunction getData(id) {\n  return Object(__WEBPACK_IMPORTED_MODULE_0__fetch_get__[\"a\" /* get */])('/api/sp500hst/item/' + id).then(function (res) {\n    return res.json();\n  }).then(function (json) {\n    if (json.code === 0) {\n      return json.data;\n    }\n  });\n}\n\nfunction getNames() {\n  return Object(__WEBPACK_IMPORTED_MODULE_0__fetch_get__[\"a\" /* get */])('/api/sp500hst/names').then(function (res) {\n    return res.json();\n  }).then(function (json) {\n    if (json.code === 0) {\n      return json.data;\n    }\n  });\n}\n\n/***/ }),\n\n/***/ 159:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = get;\n\nfunction get(url) {\n  return fetch(url, {\n    credentials: 'include',\n    headers: {\n      'Accept': 'application/json, text/plain, */*'\n    }\n  });\n}\n\n/***/ }),\n\n/***/ 160:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = ecInit;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = setCandlestickOption;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_echarts__ = __webpack_require__(161);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_echarts___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_echarts__);\n\n\n\nfunction ecInit(el) {\n  if (!el) return null;\n  var chart = __WEBPACK_IMPORTED_MODULE_0_echarts___default.a.init(document.querySelector(el));\n  chart.showLoading();\n  return chart;\n}\n\nvar upColor = '#ec0000';\nvar upBorderColor = '#8A0000';\nvar downColor = '#00da3c';\nvar downBorderColor = '#008F28';\n\nfunction setCandlestickOption(chart, initialData, id) {\n\n  var data0 = splitData(initialData);\n  var option = {\n    title: {\n      text: id + '指数',\n      left: 0\n    },\n    tooltip: {\n      trigger: 'axis',\n      axisPointer: {\n        type: 'cross'\n      }\n    },\n    legend: {\n      data: ['日K', 'MA5', 'MA10', 'MA20', 'MA30']\n    },\n    grid: {\n      left: '10%',\n      right: '10%',\n      bottom: '15%'\n    },\n    xAxis: {\n      type: 'category',\n      data: data0.categoryData,\n      scale: true,\n      boundaryGap: false,\n      axisLine: { onZero: false },\n      splitLine: { show: false },\n      splitNumber: 20,\n      min: 'dataMin',\n      max: 'dataMax'\n    },\n    yAxis: {\n      scale: true,\n      splitArea: {\n        show: true\n      }\n    },\n    dataZoom: [{\n      type: 'inside',\n      start: 50,\n      end: 100\n    }, {\n      show: true,\n      type: 'slider',\n      y: '90%',\n      start: 50,\n      end: 100\n    }],\n    series: [{\n      name: '日K',\n      type: 'candlestick',\n      data: data0.values,\n      itemStyle: {\n        normal: {\n          color: upColor,\n          color0: downColor,\n          borderColor: upBorderColor,\n          borderColor0: downBorderColor\n        }\n      },\n      markPoint: {\n        label: {\n          normal: {\n            formatter: function formatter(param) {\n              return param != null ? Math.round(param.value) : '';\n            }\n          }\n        },\n        data: [{\n          name: 'XX标点',\n          coord: ['2013/5/31', 2300],\n          value: 2300,\n          itemStyle: {\n            normal: { color: 'rgb(41,60,85)' }\n          }\n        }, {\n          name: 'highest value',\n          type: 'max',\n          valueDim: 'highest'\n        }, {\n          name: 'lowest value',\n          type: 'min',\n          valueDim: 'lowest'\n        }, {\n          name: 'average value on close',\n          type: 'average',\n          valueDim: 'close'\n        }],\n        tooltip: {\n          formatter: function formatter(param) {\n            return param.name + '<br>' + (param.data.coord || '');\n          }\n        }\n      },\n      markLine: {\n        symbol: ['none', 'none'],\n        data: [[{\n          name: 'from lowest to highest',\n          type: 'min',\n          valueDim: 'lowest',\n          symbol: 'circle',\n          symbolSize: 10,\n          label: {\n            normal: { show: false },\n            emphasis: { show: false }\n          }\n        }, {\n          type: 'max',\n          valueDim: 'highest',\n          symbol: 'circle',\n          symbolSize: 10,\n          label: {\n            normal: { show: false },\n            emphasis: { show: false }\n          }\n        }], {\n          name: 'min line on close',\n          type: 'min',\n          valueDim: 'close'\n        }, {\n          name: 'max line on close',\n          type: 'max',\n          valueDim: 'close'\n        }]\n      }\n    }, {\n      name: 'MA5',\n      type: 'line',\n      data: calculateMA(5),\n      smooth: true,\n      lineStyle: {\n        normal: { opacity: 0.5 }\n      }\n    }, {\n      name: 'MA10',\n      type: 'line',\n      data: calculateMA(10),\n      smooth: true,\n      lineStyle: {\n        normal: { opacity: 0.5 }\n      }\n    }, {\n      name: 'MA20',\n      type: 'line',\n      data: calculateMA(20),\n      smooth: true,\n      lineStyle: {\n        normal: { opacity: 0.5 }\n      }\n    }, {\n      name: 'MA30',\n      type: 'line',\n      data: calculateMA(30),\n      smooth: true,\n      lineStyle: {\n        normal: { opacity: 0.5 }\n      }\n    }]\n  };\n\n  chart.setOption(option);\n  chart.hideLoading();\n\n  function splitData(rawData) {\n    var categoryData = [];\n    var values = [];\n\n    for (var i = 0; i < rawData.length; i++) {\n      categoryData.push(rawData[i][0].replace(/(\\d{4})(\\d{2})(\\d{2})/, '$1/$2/$3'));\n      values.push([+rawData[i][1], +rawData[i][4], +rawData[i][3], +rawData[i][2]]);\n    }\n\n    return {\n      categoryData: categoryData,\n      values: values\n    };\n  }\n\n  function calculateMA(dayCount) {\n    var result = [];\n    for (var i = 0, len = data0.values.length; i < len; i++) {\n      if (i < dayCount) {\n        result.push('-');\n        continue;\n      }\n      var sum = 0;\n      for (var j = 0; j < dayCount; j++) {\n        sum += data0.values[i - j][1];\n      }\n      result.push(sum / dayCount);\n    }\n    return result;\n  }\n}\n\n/***/ })\n\n},[157]);\n\n\n// WEBPACK FOOTER //\n// static/js/index.67e2e4a4342c89316f8e.js","/**\n * Created by Administrator on 2017/9/30 0030.\n */\nimport {getData} from './api/getData'\nimport {ecInit, setCandlestickOption} from './echartsOptions'\n\nconst chart = ecInit('#main')\nconst id = 'A'\n\ngetData(id).then(data =>\n  setCandlestickOption(chart, data, id + '公司')\n)\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","/**\n * Created by Administrator on 2017/9/30 0030.\n */\nimport {get} from '../fetch/get'\nexport function getData(id) {\n  return get('/api/sp500hst/item/' + id)\n    .then(res => res.json())\n    .then(json => {\n      if (json.code === 0) {\n        return json.data\n      }\n    })\n}\n\nexport function getNames(){\n  return get('/api/sp500hst/names')\n    .then(res => res.json())\n    .then(json => {\n      if (json.code === 0) {\n        return json.data\n      }\n    })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/getData.js","/**\n * Created by Administrator on 2017/9/30 0030.\n */\nexport function get(url) {\n  return fetch(url, {\n    credentials: 'include',\n    headers: {\n      'Accept': 'application/json, text/plain, */*'\n    }\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/fetch/get.js","/**\n * Created by Administrator on 2017/9/30 0030.\n */\nimport echarts from 'echarts'\n\nexport function ecInit(el) {\n  if (!el) return null\n  const chart = echarts.init(document.querySelector(el))\n  chart.showLoading()\n  return chart\n}\n\nconst upColor = '#ec0000'\nconst upBorderColor = '#8A0000'\nconst downColor = '#00da3c'\nconst downBorderColor = '#008F28'\n\nexport function setCandlestickOption(chart, initialData, id) {\n\n  const data0 = splitData(initialData)\n  const option = {\n    title: {\n      text: id + '指数',\n      left: 0\n    },\n    tooltip: {\n      trigger: 'axis',\n      axisPointer: {\n        type: 'cross'\n      }\n    },\n    legend: {\n      data: ['日K', 'MA5', 'MA10', 'MA20', 'MA30']\n    },\n    grid: {\n      left: '10%',\n      right: '10%',\n      bottom: '15%'\n    },\n    xAxis: {\n      type: 'category',\n      data: data0.categoryData,\n      scale: true,\n      boundaryGap: false,\n      axisLine: {onZero: false},\n      splitLine: {show: false},\n      splitNumber: 20,\n      min: 'dataMin',\n      max: 'dataMax'\n    },\n    yAxis: {\n      scale: true,\n      splitArea: {\n        show: true\n      }\n    },\n    dataZoom: [\n      {\n        type: 'inside',\n        start: 50,\n        end: 100\n      },\n      {\n        show: true,\n        type: 'slider',\n        y: '90%',\n        start: 50,\n        end: 100\n      }\n    ],\n    series: [\n      {\n        name: '日K',\n        type: 'candlestick',\n        data: data0.values,\n        itemStyle: {\n          normal: {\n            color: upColor,\n            color0: downColor,\n            borderColor: upBorderColor,\n            borderColor0: downBorderColor\n          }\n        },\n        markPoint: {\n          label: {\n            normal: {\n              formatter: function (param) {\n                return param != null ? Math.round(param.value) : '';\n              }\n            }\n          },\n          data: [\n            {\n              name: 'XX标点',\n              coord: ['2013/5/31', 2300],\n              value: 2300,\n              itemStyle: {\n                normal: {color: 'rgb(41,60,85)'}\n              }\n            },\n            {\n              name: 'highest value',\n              type: 'max',\n              valueDim: 'highest'\n            },\n            {\n              name: 'lowest value',\n              type: 'min',\n              valueDim: 'lowest'\n            },\n            {\n              name: 'average value on close',\n              type: 'average',\n              valueDim: 'close'\n            }\n          ],\n          tooltip: {\n            formatter: function (param) {\n              return param.name + '<br>' + (param.data.coord || '');\n            }\n          }\n        },\n        markLine: {\n          symbol: ['none', 'none'],\n          data: [\n            [\n              {\n                name: 'from lowest to highest',\n                type: 'min',\n                valueDim: 'lowest',\n                symbol: 'circle',\n                symbolSize: 10,\n                label: {\n                  normal: {show: false},\n                  emphasis: {show: false}\n                }\n              },\n              {\n                type: 'max',\n                valueDim: 'highest',\n                symbol: 'circle',\n                symbolSize: 10,\n                label: {\n                  normal: {show: false},\n                  emphasis: {show: false}\n                }\n              }\n            ],\n            {\n              name: 'min line on close',\n              type: 'min',\n              valueDim: 'close'\n            },\n            {\n              name: 'max line on close',\n              type: 'max',\n              valueDim: 'close'\n            }\n          ]\n        }\n      },\n      {\n        name: 'MA5',\n        type: 'line',\n        data: calculateMA(5),\n        smooth: true,\n        lineStyle: {\n          normal: {opacity: 0.5}\n        }\n      },\n      {\n        name: 'MA10',\n        type: 'line',\n        data: calculateMA(10),\n        smooth: true,\n        lineStyle: {\n          normal: {opacity: 0.5}\n        }\n      },\n      {\n        name: 'MA20',\n        type: 'line',\n        data: calculateMA(20),\n        smooth: true,\n        lineStyle: {\n          normal: {opacity: 0.5}\n        }\n      },\n      {\n        name: 'MA30',\n        type: 'line',\n        data: calculateMA(30),\n        smooth: true,\n        lineStyle: {\n          normal: {opacity: 0.5}\n        }\n      },\n\n    ]\n  }\n\n  chart.setOption(option)\n  chart.hideLoading()\n\n  function splitData(rawData) {\n    const categoryData = []\n    const values = []\n\n    for (let i = 0; i < rawData.length; i++) {\n      categoryData.push(rawData[i][0].replace(/(\\d{4})(\\d{2})(\\d{2})/, '$1/$2/$3'))\n      values.push([\n        +rawData[i][1],\n        +rawData[i][4],\n        +rawData[i][3],\n        +rawData[i][2]\n      ])\n    }\n\n    return {\n      categoryData,\n      values\n    }\n  }\n\n  function calculateMA(dayCount) {\n    const result = []\n    for (let i = 0, len = data0.values.length; i < len; i++) {\n      if (i < dayCount) {\n        result.push('-')\n        continue\n      }\n      let sum = 0\n      for (let j = 0; j < dayCount; j++) {\n        sum += data0.values[i - j][1]\n      }\n      result.push(sum / dayCount)\n    }\n    return result\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/echartsOptions/index.js"],"sourceRoot":""}